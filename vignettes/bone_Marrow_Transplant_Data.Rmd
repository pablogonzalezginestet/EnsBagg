---
title: "bone_Marrow_Transplant_Data"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{bone_Marrow_Transplant_Data}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(ensBagg)
```

## Introduction

We apply the package __ensBagg__ to a data set The Bone Marrow Transplant Data (bmt) which is in the package __timereg__ . Bone marrow transplants are a standard treatment for acute leukemia. In the recovery process patients can suffer from Infections, toxicity, and (after allogeneic HSCT only), graft-vs.-host disease (GVHD) being  the main causes of death. We are interested in predicting  the time to death related to treatment where the risk of relapse is a competing risk. 

## Setup

We load the package __ensBagg__ and __timereg__ and we load the data set bmt

```{r}
library(ensBagg)
library(timereg)
bmt.data <- data(bmt)
```


````{r}
summary(bmt)
dim(bmt)
train.set <- sample(1:nrow(bmt), floor(.9*nrow(bmt)), replace=FALSE) 
test.set <- setdiff(1:nrow(bmt), train.set)
bmt.train <- data.frame(bmt[train.set,])
bmt.test <- data.frame(bmt[test.set,]) 
tao=7
````

````{r,warning=FALSE}
pred.bmt=ensBagg::ensBagg(train.data = bmt.train,test.data = bmt.test,xnam=names(bmt)[-(1:2)],tao=7,weighting ="CoxPH" ,folds =5 )
````